<h1>SDLFileManager Class Reference</h1>

<h3>Section Contents</h3>

<ul>
  <li><a href="#section-remoteFileNames">remoteFileNames</a></li>
  <li><a href="#section-bytesAvailable">bytesAvailable</a></li>
  <li><a href="#section-currentState">currentState</a></li>
  <li><a href="#section-pendingTransactions">pendingTransactions</a></li>
  <li><a href="#section-suspended">suspended</a></li>
  <li><a href="#section--init">-init</a></li>
  <li><a href="#section--initWithConnectionManager:">-initWithConnectionManager:</a></li>
  <li><a href="#section--startWithCompletionHandler:">-startWithCompletionHandler:</a></li>
  <li><a href="#section--stop">-stop</a></li>
  <li><a href="#section--deleteRemoteFileWithName:completionHandler:">-deleteRemoteFileWithName:completionHandler:</a></li>
  <li><a href="#section--uploadFile:completionHandler:">-uploadFile:completionHandler:</a></li>
  <li><a href="#section-+temporaryFileDirectory">+temporaryFileDirectory</a></li>
</ul>

<h3>Overview</h3>

<p>The SDLFileManager is an RPC manager for the remote file system. After it starts, it will attempt to communicate with the remote file system to get the names of all files. Deleting and Uploading will them queue these changes as transactions. If a delete succeeds, the local list of remote files will remove that file name, and likewise, if an upload succeeds, the local list of remote files will now include that file name.</p>


<section class="section task-group-section">
  <h3 id="section-remoteFileNames">
      remoteFileNames
  </h3>
  
  <p>A set of all names of files known on the remote head unit. Known files can be used or deleted on the remote system.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span>
    <span class="n">NSSet</span><span class="o">&lt;</span><span class="n"><a href="../Type Definitions.html#/c:SDLFileManager.h@T@SDLFileName">SDLFileName</a></span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">_Nonnull</span> <span class="n">remoteFileNames</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="k">var</span> <span class="nv">remoteFileNames</span><span class="p">:</span> <span class="kt">Set</span></code></pre>

  
  
  
  <h3 id="section-bytesAvailable">
      bytesAvailable
  </h3>
  
  <p>The number of bytes still available for files for this app.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">assign</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSUInteger</span> <span class="n">bytesAvailable</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="k">var</span> <span class="nv">bytesAvailable</span><span class="p">:</span> <span class="kt">UInt</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

  
  
  
  <h3 id="section-currentState">
      currentState
  </h3>
  
  <p>The state of the file manager.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">_Nonnull</span> <span class="n">currentState</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="k">var</span> <span class="nv">currentState</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

  
  
  
  <h3 id="section-pendingTransactions">
      pendingTransactions
  </h3>
  
  <p>The currently pending transactions (Upload, Delete, and List Files) in the file manager</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span>
    <span class="n">NSArray</span><span class="o">&lt;</span><span class="n">__kindof</span> <span class="n">NSOperation</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">_Nonnull</span> <span class="n">pendingTransactions</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="k">var</span> <span class="nv">pendingTransactions</span><span class="p">:</span> <span class="p">[</span><span class="kt">Operation</span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

  
  
  
  <h3 id="section-suspended">
      suspended
  </h3>
  
  <p>Whether or not the file manager is suspended. If suspended, the file manager can continue to queue uploads and deletes, but will not actually perform any of those until it is no longer suspended. This can be used for throttling down the file manager if other, important operations are taking place over the accessory connection.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">assign</span><span class="p">,</span> <span class="n">readwrite</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">BOOL</span> <span class="n">suspended</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="k">var</span> <span class="nv">suspended</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

  
  
  
  <h3 id="section--init">
      -init
  </h3>
  
  <p>Initialize the class&hellip;or not, since this method is unavailable. Dependencies must be injected using initWithConnectionManager:</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="n">nonnull</span> <span class="n">instancetype</span><span class="p">)</span><span class="n">init</span><span class="p">;</span></code></pre>

  
  
  
  <div>
    <h4>Return Value</h4>
    <p>nil</p>

  </div>
  
  <h3 id="section--initWithConnectionManager:">
      -initWithConnectionManager:
  </h3>
  
  <p>Creates a new file manager with a specified connection manager</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="n">nonnull</span> <span class="n">instancetype</span><span class="p">)</span><span class="nf">initWithConnectionManager</span><span class="p">:</span>
    <span class="p">(</span><span class="n">nonnull</span> <span class="n">id</span><span class="o">&lt;</span><span class="n">SDLConnectionManagerType</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">manager</span><span class="p">;</span></code></pre>

  
  
  
  <h4>Parameters</h4>
  <dl>
      <dt>manager</dt>
      <dd><p>A connection manager to use to forward on RPCs</p>
</dd>
  </dl>
  <div>
    <h4>Return Value</h4>
    <p>An instance of SDLFileManager</p>

  </div>
  
  <h3 id="section--startWithCompletionHandler:">
      -startWithCompletionHandler:
  </h3>
  
  <p>The manager stars up and attempts to fetch its initial list and transfer initial files.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">startWithCompletionHandler</span><span class="p">:</span>
    <span class="p">(</span><span class="n">nullable</span> <span class="n"><a href="../Type Definitions.html#/c:SDLFileManager.h@T@SDLFileManagerStartupCompletionHandler">SDLFileManagerStartupCompletionHandler</a></span><span class="p">)</span><span class="nv">completionHandler</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="kd">func</span> <span class="nf">start</span><span class="p">(</span><span class="nv">completionHandler</span><span class="p">:</span> <span class="kt"><a href="../Type Definitions.html#/c:SDLFileManager.h@T@SDLFileManagerStartupCompletionHandler">SDLFileManagerStartupCompletionHandler</a></span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span></code></pre>

  
  
  <h4>Parameters</h4>
  <dl>
      <dt>completionHandler</dt>
      <dd><p>The handler called when the manager is set up or failed to set up with an error. Use weak self when accessing self from the completion handler.</p>
</dd>
  </dl>
  
  <h3 id="section--stop">
      -stop
  </h3>
  
  <p>Cancels all file manager operations and deletes all associated data.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">stop</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="kd">func</span> <span class="nf">stop</span><span class="p">()</span></code></pre>

  
  
  
  <h3 id="section--deleteRemoteFileWithName:completionHandler:">
      -deleteRemoteFileWithName:completionHandler:
  </h3>
  
  <p>Delete a file stored on the remote system</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">deleteRemoteFileWithName</span><span class="p">:(</span><span class="n">nonnull</span> <span class="n"><a href="../Type Definitions.html#/c:SDLFileManager.h@T@SDLFileName">SDLFileName</a></span> <span class="o">*</span><span class="p">)</span><span class="nv">name</span>
               <span class="nf">completionHandler</span><span class="p">:</span>
                   <span class="p">(</span><span class="n">nullable</span> <span class="n"><a href="../Type Definitions.html#/c:SDLFileManagerConstants.h@T@SDLFileManagerDeleteCompletionHandler">SDLFileManagerDeleteCompletionHandler</a></span><span class="p">)</span><span class="nv">completion</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="kd">func</span> <span class="nf">deleteRemoteFile</span><span class="p">(</span><span class="n">withName</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="n">completionHandler</span> <span class="nv">completion</span><span class="p">:</span> <span class="kt"><a href="../Type Definitions.html#/c:SDLFileManagerConstants.h@T@SDLFileManagerDeleteCompletionHandler">SDLFileManagerDeleteCompletionHandler</a></span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span></code></pre>

  
  
  <h4>Parameters</h4>
  <dl>
      <dt>name</dt>
      <dd><p>The name of the remote file. It should be a name currently stored in remoteFileNames</p>
</dd>
      <dt>completion</dt>
      <dd><p>An optional completion handler that sends an error should one occur.</p>
</dd>
  </dl>
  
  <h3 id="section--uploadFile:completionHandler:">
      -uploadFile:completionHandler:
  </h3>
  
  <p>Upload a file to the remote file system. If a file with the [SDLFile name] already exists, this will overwrite that file. If you do not want that to happen, check remoteFileNames before uploading, or change allowOverwrite to NO.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">uploadFile</span><span class="p">:(</span><span class="n">nonnull</span> <span class="n"><a href="../Classes/SDLFile.html">SDLFile</a></span> <span class="o">*</span><span class="p">)</span><span class="nv">file</span>
    <span class="nf">completionHandler</span><span class="p">:</span>
        <span class="p">(</span><span class="n">nullable</span> <span class="n"><a href="../Type Definitions.html#/c:SDLFileManagerConstants.h@T@SDLFileManagerUploadCompletionHandler">SDLFileManagerUploadCompletionHandler</a></span><span class="p">)</span><span class="nv">completion</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="kd">func</span> <span class="nf">uploadFile</span><span class="p">(</span><span class="n">_</span> <span class="nv">file</span><span class="p">:</span> <span class="kt"><a href="../Classes/SDLFile.html">SDLFile</a></span><span class="p">,</span> <span class="n">completionHandler</span> <span class="nv">completion</span><span class="p">:</span> <span class="kt"><a href="../Type Definitions.html#/c:SDLFileManagerConstants.h@T@SDLFileManagerUploadCompletionHandler">SDLFileManagerUploadCompletionHandler</a></span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span></code></pre>

  
  
  <h4>Parameters</h4>
  <dl>
      <dt>file</dt>
      <dd><p>An SDLFile that contains metadata about the file to be sent</p>
</dd>
      <dt>completion</dt>
      <dd><p>An optional completion handler that sends an error should one occur.</p>
</dd>
  </dl>
  
  <h3 id="section-+temporaryFileDirectory">
      +temporaryFileDirectory
  </h3>
  
  <p>A URL to the directory where temporary files are stored. When an SDLFile is created with NSData, it writes to a temporary file until the file manager finishes uploading it.</p>

<p>The SDL library manages the creation and deletion of these files and you should not have to touch this directory at all.</p>

  
  
  <h4>Objective-C</h4>
  <pre class="highlight"><code><span class="k">+</span> <span class="p">(</span><span class="n">nonnull</span> <span class="n">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="n">temporaryFileDirectory</span><span class="p">;</span></code></pre>

  
  <h4>Swift</h4>
  <pre class="highlight"><code><span class="kd">class</span> <span class="kd">func</span> <span class="nf">temporaryFileDirectory</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">URL</span></code></pre>

  
  
  <div>
    <h4>Return Value</h4>
    <p>An NSURL pointing to the location on disk where SDL&rsquo;s temporary files are stored.</p>

  </div>
  
</section>
